<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>App Forge - AI-Free App Builder</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">üî® App Forge</div>
        <div class="tagline">Constraint-driven. AI-free. Working apps.</div>
      </div>
    </header>

    <!-- Main content -->
    <main class="main">
      <!-- Step 1: Describe -->
      <div id="step-describe" class="step active">
        <div class="step-card">
          <h1>Describe Your App</h1>
          <p class="step-subtitle">Tell us what you're building. Be specific but natural.</p>
          
          <div class="form-group">
            <textarea 
              id="description" 
              placeholder="E.g., A collaborative todo app where teams can assign tasks, set deadlines, and get notifications when tasks change."
              rows="5"
              class="textarea"
            ></textarea>
          </div>

          <div class="form-group">
            <button id="btn-next" class="btn primary large">Start Building ‚Üí</button>
          </div>

          <div class="example-apps">
            <p><strong>Examples:</strong></p>
            <ul>
              <li>A habit tracker with daily check-ins and progress charts</li>
              <li>Recipe collection app where I can save recipes and rate them</li>
              <li>Real-time inventory management for a small store</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Step 2: Questions -->
      <div id="step-questions" class="step">
        <div class="step-card">
          <div id="detection-panel" class="detection-panel" style="display:none;">
            <h3>&#10003; We figured out from your description:</h3>
            <div id="detection-items"></div>
          </div>

          <h1 id="questions-title">Tell Us About Your App</h1>
          <p class="step-subtitle" id="question-count"></p>
          
          <div id="questions-container"></div>
          
          <div class="form-group">
            <button id="btn-back" class="btn">&larr; Back</button>
          </div>
        </div>
      </div>

      <!-- Step 3: Review & Export -->
      <div id="step-review" class="step">
        <div class="step-card">
          <h1>Your App is Ready!</h1>
          
          <div class="tech-stack">
            <h3>Recommended Stack</h3>
            <div class="stack-item">
              <strong>Backend:</strong> <span id="stack-backend"></span>
            </div>
            <div class="stack-item">
              <strong>Database:</strong> <span id="stack-db"></span>
            </div>
            <div class="stack-item">
              <strong>Frontend:</strong> <span id="stack-frontend"></span>
            </div>
            <div class="stack-item">
              <strong>Auth:</strong> <span id="stack-auth"></span>
            </div>
            <div id="stack-notes"></div>
          </div>

          <div class="preview-section">
            <div class="preview-status" id="preview-status" style="display: none;"></div>
            <div class="preview-tabs">
              <button class="preview-tab active" data-tab="preview" onclick="switchTab('preview')">Live Preview</button>
              <button class="preview-tab" data-tab="code" onclick="switchTab('code')">Code</button>
            </div>
            <div id="tab-preview" class="tab-content active">
              <iframe id="preview-frame" class="preview-frame"></iframe>
            </div>
            <div id="tab-code" class="tab-content">
              <div class="file-tabs" id="file-tabs">
                <button class="file-tab active" data-file="app.py" onclick="switchFile('app.py')">app.py</button>
                <button class="file-tab" data-file="requirements.txt" onclick="switchFile('requirements.txt')">requirements.txt</button>
                <button class="file-tab" data-file="templates/index.html" onclick="switchFile('templates/index.html')">index.html</button>
              </div>
              <div id="code-preview" class="code-preview"></div>
            </div>
          </div>

          <div class="app-name-form">
            <label>App Name:</label>
            <input type="text" id="app-name" value="My App" class="input">
          </div>

          <div class="form-group button-row">
            <button id="btn-back-review" class="btn">‚Üê Start Over</button>
            <button id="btn-change-answers" class="btn secondary">‚Üª Change Answers</button>
            <button id="btn-save" class="btn primary large">Save to Desktop</button>
            <button id="btn-export-github" class="btn secondary large">Export to GitHub</button>
          </div>

          <div class="success-message" id="success-message" style="display: none;">
            <h3>‚úì Saved Successfully!</h3>
            <p id="success-path"></p>
            <p class="success-next">
              To run your app locally:<br>
              <code>cd <span id="success-cd"></span></code><br>
              <code>pip install -r requirements.txt</code><br>
              <code>python app.py</code><br>
              Then open <code>http://127.0.0.1:5000</code>
            </p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="/js/app.js"></script>
</body>
</html>
